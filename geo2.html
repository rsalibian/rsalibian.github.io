<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    
    <title>OVMC RADIOLOGY CORE TRAINER</title>
    
    <link rel ="stylesheet" href="style.css">
    
    <div style="text-align:center"> 
    
    <br/><br/>
      
    <button style="font-size : 40px; height:100px; width:300px" onclick="PrevCase()">Previous Case</button>
      
    &nbsp;&nbsp;&nbsp;&nbsp;
      
    <button style="font-size : 40px; height:100px; width:300px" onclick="NextCase()">Next Case</button>
      
    <br/><br/>
      
    <video id="myVideo" width="890" loop>
       <source id="mp4_src" src="/mskvid/video1.mp4" type="video/mp4">
       <source id="ogg_src"  src=/mskvid/video1.mp4" type="video/ogg">
       Your browser does not support the video tag.
    </video>  
      
    <br/><br/>
      
    <label style="font-size : 40px;">CTisus - Daily Case Vignette (ctisus.com)</label><br>
      
      
    <div>
      
</head>
  
<body style="background-color:gray" onload="myFunction()">


<script>
                                                         
let currentVideo = 1;
let totalVideos = 7;
  
let is_running = false;
  
var x = document.getElementById("myVideo"); 
  
function playVid() { 
  x.play(); 
} 

function pauseVid() { 
  x.pause(); 
} 

function handleOrientation(event) {
  updateFieldIfNotNull('Orientation_a', event.alpha);
  updateFieldIfNotNull('Orientation_b', event.beta);
  updateFieldIfNotNull('Orientation_g', event.gamma);
}
  
function NextCase(){
                                         
 if currentVideo < totalVideos {
  
  currentVideo = currentVideo + 1;
                                         
 else {
                                         
  currentVideo = 1;
 }
                                         
  document.getElementById("mp4_src").src = "/mskvid/video " + currentVideo + ".mp4";
  
  document.getElementById("myVideo").load();
  
}

function PrevCase(){
  
  currentVideo = currentVideo - 1;
                                         
  document.getElementById("mp4_src").src = "mskvid/video " + currentVideo + ".mp4";
  
  document.getElementById("myVideo").load();
  
}
                                   
function handleMotion(event) {

  if (event.accelerationIncludingGravity.y > -2.5 && event.accelerationIncludingGravity.y < 1.5 && event.accelerationIncludingGravity.x > -2 && event.accelerationIncludingGravity.x < 1){
    
    playVid()
    
  }
  
  else
  {
    
    pauseVid()
    
  }
  
}


function myFunction() {
  
  //playVid()
  
  //e.preventDefault();
  
  // Request permission for iOS 13+ devices
  if (
    DeviceMotionEvent &&
    typeof DeviceMotionEvent.requestPermission === "function"
  ) {
    DeviceMotionEvent.requestPermission();
  }
  
  if (is_running){
    window.removeEventListener("devicemotion", handleMotion);
    window.removeEventListener("deviceorientation", handleOrientation);
    is_running = false;
  }else{
    window.addEventListener("devicemotion", handleMotion);
    window.addEventListener("deviceorientation", handleOrientation);
    is_running = true;
  }
};

/*
Light and proximity are not supported anymore by mainstream browsers.
window.addEventListener('devicelight', function(e) {
   document.getElementById("DeviceLight").innerHTML="AmbientLight current Value: "+e.value+" Max: "+e.max+" Min: "+e.min;
});

window.addEventListener('lightlevel', function(e) {
   document.getElementById("Lightlevel").innerHTML="Light level: "+e.value;
});

window.addEventListener('deviceproximity', function(e) {
   document.getElementById("DeviceProximity").innerHTML="DeviceProximity current Value: "+e.value+" Max: "+e.max+" Min: "+e.min;
});

window.addEventListener('userproximity', function(event) {
   document.getElementById("UserProximity").innerHTML="UserProximity: "+event.near;
});
*/

</script>
</body>
</html>
