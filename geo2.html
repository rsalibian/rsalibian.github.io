<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    
<style>

body {
  margin: 0;
}

#myVideo {
  position: fixed;
  left: 0;
  top: 0;
  min-width: 800px; 
  min-height: 800px;
}
      
</style>
    
    <title>OVMC RADIOLOGY CORE TRAINER</title>
    
  </head>
     
<body style="background-color:gray" onload="myFunction()">

       <video id="myVideo" style = "transform:rotate(90deg)" onclick="NextCase()" loop>
         <source id="mp4_src" src="" type="video/mp4">
       </video>
   
<script>
  
const neurovideos = ["https://www.ctisus.com/resources/library/media/vignette/February_2022/February_2022_MSK_9.mp4",
                   "https://www.ctisus.com/resources/library/media/vignette/January_2022/January_2022_MSK_9.mp4", 
                   "https://www.ctisus.com/resources/library/media/vignette/November_2021/November_2021_MSK_10.mp4", 
                   "https://www.ctisus.com/resources/library/media/vignette/October_2021/October_2021_MSK_10.mp4",
                   "https://www.ctisus.com/resources/library/media/vignette/August_2021/August_2021_MSK_10.mp4"];  
  
const mskvideos = ["https://www.ctisus.com/resources/library/media/vignette/February_2022/February_2022_MSK_9.mp4",
                   "https://www.ctisus.com/resources/library/media/vignette/January_2022/January_2022_MSK_9.mp4", 
                   "https://www.ctisus.com/resources/library/media/vignette/November_2021/November_2021_MSK_10.mp4", 
                   "https://www.ctisus.com/resources/library/media/vignette/October_2021/October_2021_MSK_10.mp4",
                   "https://www.ctisus.com/resources/library/media/vignette/August_2021/August_2021_MSK_10.mp4"];  
                                                         
let currentVideo = 0;
let totalVideos = 7;
  
let is_running = false;
  
var x = document.getElementById("myVideo"); 
  
function playVid() { 
  x.play(); 
} 

function pauseVid() { 
  x.pause(); 
} 

function handleOrientation(event) {
  updateFieldIfNotNull('Orientation_a', event.alpha);
  updateFieldIfNotNull('Orientation_b', event.beta);
  updateFieldIfNotNull('Orientation_g', event.gamma);
}
  
function NextCase(){
                                         
 if (currentVideo < mskvideos.length - 1) {
  
  currentVideo = currentVideo + 1;
 
 }
                                         
 else {
                                         
  currentVideo = 0;
                                         
 }
                                         
  document.getElementById("mp4_src").src = mskvideos[currentVideo];
  
  document.getElementById("myVideo").load();
  
}
                                   
function handleMotion(event) {

  if (event.accelerationIncludingGravity.y > -2.5 && event.accelerationIncludingGravity.y < 1.5 && event.accelerationIncludingGravity.x > -2 && event.accelerationIncludingGravity.x < 1){
    
    playVid()
    
  }
  
  else
  {
    
    pauseVid()
    
  }
  
}


function myFunction() {
  
  // Request permission for iOS 13+ devices
  if (
    DeviceMotionEvent &&
    typeof DeviceMotionEvent.requestPermission === "function"
  ) {
    DeviceMotionEvent.requestPermission();
  }
  
  if (is_running){
    window.removeEventListener("devicemotion", handleMotion);
    window.removeEventListener("deviceorientation", handleOrientation);
    is_running = false;
  }else{
    window.addEventListener("devicemotion", handleMotion);
    window.addEventListener("deviceorientation", handleOrientation);
    is_running = true;
  }
  
  var queryString = location.search.substring(1);
  
  if (queryString = "MSK"){
    
     document.getElementById("mp4_src").src = mskvideos[0];
  
  }
  
  else if(queryString = "NEURO"){
    
    document.getElementById("mp4_src").src = neurovideos[0];
  
  }
  
 
  document.getElementById("myVideo").load();
  
 
};



</script>
</body>
</html>
